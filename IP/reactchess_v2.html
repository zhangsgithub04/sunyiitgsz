<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDN React Chess</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
</head>
<body class="bg-slate-900 text-white min-h-screen flex flex-col items-center justify-center p-4">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function ChessApp() {
            const [game, setGame] = useState(new Chess());
            const [board, setBoard] = useState(game.board());
            const [status, setStatus] = useState("White's Turn");

            // Map chess.js piece types to Unicode characters
            const pieceSymbols = {
                'p': '♟', 'r': '♜', 'n': '♞', 'b': '♝', 'q': '♛', 'k': '♚',
                'P': '♙', 'R': '♖', 'N': '♘', 'B': '♗', 'Q': '♕', 'K': '♔'
            };

            const updateGame = () => {
                setBoard(game.board());
                let turn = game.turn() === 'w' ? 'White' : 'Black';
                if (game.in_checkmate()) turn += " - Checkmate!";
                else if (game.in_draw()) turn = "Draw!";
                setStatus(turn);
            };

            const makeMove = (from, to) => {
                const move = game.move({ from, to, promotion: 'q' });
                if (move) updateGame();
            };

            return (
                <div className="flex flex-col items-center gap-6">
                    <h1 className="text-4xl font-bold text-sky-400">CDN Chess</h1>
                    <div className="bg-slate-800 p-2 rounded-lg shadow-2xl border-4 border-slate-700">
                        {board.map((row, i) => (
                            <div key={i} className="flex">
                                {row.map((square, j) => {
                                    const squareLabel = String.fromCharCode(97 + j) + (8 - i);
                                    const isDark = (i + j) % 2 === 1;
                                    return (
                                        <div 
                                            key={j}
                                            className={`w-12 h-12 md:w-16 md:h-16 flex items-center justify-center text-3xl md:text-4xl cursor-pointer transition-colors
                                                ${isDark ? 'bg-slate-600' : 'bg-slate-300'}`}
                                            onClick={() => {
                                                // Simple move logic: click to move (needs a selection state for real use)
                                                // This is a simplified placeholder
                                                console.log(`Clicked ${squareLabel}`);
                                            }}
                                        >
                                            <span className={square?.color === 'w' ? 'text-white' : 'text-black'}>
                                                {square ? pieceSymbols[square.color === 'w' ? square.type.toUpperCase() : square.type] : ''}
                                            </span>
                                        </div>
                                    );
                                })}
                            </div>
                        ))}
                    </div>
                    <div className="text-xl font-semibold bg-slate-800 px-6 py-2 rounded-full border border-slate-600">
                        Status: {status}
                    </div>
                    <button 
                        onClick={() => { game.reset(); updateGame(); }}
                        className="bg-sky-600 hover:bg-sky-500 px-4 py-2 rounded font-bold transition"
                    >
                        Reset Game
                    </button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ChessApp />);
    </script>
</body>
</html>
